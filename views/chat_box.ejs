<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/footer.css">
<link rel="stylesheet" href="/css/chat_box.css">

<main>
    <div id="chat-engine">
        <div id= "header">
            <span>
                <i class="far fa-comment-alt"></i>
            </span>
            <span>Chats</span>
            <span id="curr-user" style="margin: 0px 0vw 0 20vw;">
                <img id='curr-user-img'>
                <span id="curr-user-name">Messages</span>
                
            </span>
        </div>
            <div id="main">
                <section id="chats-list">
                    <ul>
                        <% for(friend of friend_list) { %>
                            <li>
                                <p> 
                                    <span>
                                        <% if( friend.avatar ) { %>
                                            <img src="<%= friend.avatar%>" alt="pp">
                                        <% } else {%>
                                            <img src="https://www.kindpng.com/picc/m/78-786207_user-avatar-png-user-avatar-icon-png-transparent.png" alt="avatar">
                                        <% } %>
                                        <a class="connect-to" data-img="<%= friend.avatar%>" data-name="<%= friend.name%>" data-id="<%= friend._id%>"><%=friend.name%></a>    
                                        </span>
                                </p>
                            </li>
                        <% } %>        
                    </ul>
                </section>
                    
                <section id="chat-box">
                    <div id="chat-interface">
                        <ul id="chat-message-list">
                            <!-- <li class="user-message">
                                <div class="mssg-info-container">
                                    <p >
                                        User-Message
                                    </p>
                                </div>
                            </li>
                            <li  class="friend-message">    
                                <div class="mssg-info-container">
                                    <p>
                                        Friend-Message
                                    </p>
                                </div>
                            </li>
                        </ul> -->
                    </div>
                    
                    <div id="chat-form-container">  
                            <textarea id="chat-message-input" rows="3" cols="50" placeholder="Type your message here..." required > </textarea>
                            <button id="send-message">
                                <i class="fas fa-arrow-circle-right"></i>
                            </button>
                    </div>
                </section>
            </div>
        
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.3/socket.io.js"></script>
    <script src="/js/chat_engine.js"></script>

    <%if(locals.user) { %>
        <script>
            new ChatEngine('chat-interface', '<%= locals.user._id %>');
        </script>
    <% } %>

</main>